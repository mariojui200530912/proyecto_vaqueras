<!-- Created with Jaspersoft Studio version 7.0.3.final using JasperReports Library version 7.0.3-41034ca841d452f3305ba55b9042260aaa1ab5dd  -->
<jasperReport name="BibliotecaSQL" language="java" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="8813665b-1264-40bc-866c-4f691641d382">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="proyecto_vaqueras"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<parameter name="ID_USUARIO" class="java.lang.Integer"/>
	<parameter name="NOMBRE_USUARIO" class="java.lang.String"/>
	<query language="sql"><![CDATA[SELECT j.titulo, j.calificacion_promedio, c.calificacion
        FROM biblioteca b
        INNER JOIN juego j ON b.id_juego = j.id
        LEFT JOIN calificacion c ON (c.id_juego = j.id AND c.id_usuario = $P{ID_USUARIO})
        WHERE b.id_usuario = $P{ID_USUARIO}
        ORDER BY j.titulo ASC]]></query>
	<field name="titulo" class="java.lang.String"/>
	<field name="calificacion_promedio" class="java.math.BigDecimal"/>
	<field name="calificacion" class="java.math.BigDecimal"/>
	<background splitType="Stretch"/>
	<title height="80">
		<element kind="rectangle" uuid="6e351c56-6f36-4d65-b723-a9844fe1a0b0" x="-20" y="0" width="595" height="80" backcolor="#5D4037">
			<pen lineWidth="0.0"/>
		</element>
		<element kind="staticText" uuid="17455a5e-748c-4cf5-8ee3-42ea7e072e9a" x="0" y="20" width="555" height="30" forecolor="#FFFFFF" fontSize="20.0" bold="true" hTextAlign="Center">
			<text><![CDATA[Análisis de Biblioteca y Valoraciones]]></text>
		</element>
		<element kind="textField" uuid="cedf3ffa-b3a3-4c1b-bb48-15d28f2e8558" x="0" y="50" width="555" height="20" forecolor="#FFCCBC" fontSize="12.0" hTextAlign="Center">
			<expression><![CDATA["Usuario: " + $P{NOMBRE_USUARIO}]]></expression>
		</element>
	</title>
	<columnHeader height="30">
		<element kind="staticText" uuid="b5e96f0c-a6f9-48ed-bc3e-a74ed78e95ff" x="0" y="0" width="250" height="20" bold="true">
			<text><![CDATA[Juego]]></text>
		</element>
		<element kind="staticText" uuid="fd7719c4-afa5-4363-b053-1ee907020e75" x="260" y="0" width="130" height="20" bold="true" hTextAlign="Center">
			<text><![CDATA[Rating Global]]></text>
		</element>
		<element kind="staticText" uuid="f5621d76-6ff8-41b4-94f6-80cca9c17f9d" x="400" y="0" width="130" height="20" bold="true" hTextAlign="Center">
			<text><![CDATA[Tu Opinión]]></text>
		</element>
	</columnHeader>
	<detail>
		<band height="25">
			<element kind="textField" uuid="586e1c46-8869-475a-8894-cc2e6a951c9f" x="0" y="0" width="250" height="20">
				<expression><![CDATA[$F{titulo}]]></expression>
			</element>
			<element kind="textField" uuid="8f276f40-a08b-421b-be91-53b247878c56" x="260" y="0" width="130" height="20" pattern="#,##0.0" hTextAlign="Center">
				<expression><![CDATA[$F{calificacion_promedio}]]></expression>
			</element>
			<element kind="textField" uuid="cdb88021-0720-4fba-bb15-b5142c9b8316" x="400" y="0" width="130" height="20" forecolor="#006600" bold="true" hTextAlign="Center">
				<expression><![CDATA[$F{calificacion} == null ? "-" : $F{calificacion} + " / 5.0"]]></expression>
			</element>
		</band>
	</detail>
</jasperReport>
