<div class="container py-4">
  
  <h3 class="fw-bold mb-4 text-dark">
    <i class="bi bi-sliders"></i> Configuración Financiera
  </h3>

  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      
      <div class="card shadow border-0">
        <div class="card-header bg-primary text-white py-3">
          <h5 class="mb-0 fw-bold"><i class="bi bi-percent"></i> Comisión Global</h5>
        </div>
        
        <div class="card-body p-4">
          
          <div class="text-center mb-4 p-3 bg-light rounded border border-dashed">
            <small class="text-muted text-uppercase fw-bold">Porcentaje Actual</small>
            <div class="display-1 fw-bold text-primary">
              {{ configService.comisionActual() }}%
            </div>
            <p class="small text-muted mb-0">Esta comisión se descuenta a las empresas por cada venta.</p>
          </div>

          <hr>

          <form (ngSubmit)="guardarCambios()">
            
            <label class="form-label fw-bold">Definir Nuevo Porcentaje</label>
            
            <div class="input-group mb-3">
              <input type="number" 
                     class="form-control form-control-lg" 
                     [(ngModel)]="nuevoPorcentaje" 
                     name="porcentaje" 
                     placeholder="Ej: 15" 
                     min="0" max="100" 
                     step="0.01"
                     required>
              <span class="input-group-text fw-bold">%</span>
            </div>

            <div class="d-grid gap-2">
              <button type="submit" 
                      class="btn btn-primary btn-lg" 
                      [disabled]="isLoading || nuevoPorcentaje === null">
                @if (isLoading) {
                  <span class="spinner-border spinner-border-sm me-2"></span> Guardando...
                } @else {
                  <i class="bi bi-save"></i> Guardar Nueva Comisión
                }
              </button>
              
              <button type="button" 
                      class="btn btn-outline-secondary" 
                      (click)="usarValorActual()" 
                      [disabled]="isLoading">
                Cargar valor actual en el campo
              </button>
            </div>

          </form>

          <div class="alert alert-warning mt-4 d-flex align-items-center" role="alert">
            <i class="bi bi-exclamation-triangle-fill fs-4 me-3"></i>
            <div class="small">
              <strong>Atención:</strong> Este cambio se aplica inmediatamente a todas las transacciones realizadas a partir de este momento. No afecta ventas pasadas.
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>